{% extends "data_products/base.html" %}

{% block content %}
    <h1 style="font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue,sans-serif">{{ product.tissue.tissuetype }}</h1>
    {% if product.download %}
    <p><a style="font-family:'Arial'" href="{{product.download}}/{{product.tissue.tissuecode}}_raw.h5ad">Download Raw Data Product</a>
    &nbsp;&nbsp;<a style="font-family:'Arial'" href="{{product.download}}/{{product.tissue.tissuecode}}_processed.h5ad">Download Processed Data Product</a></p>
    {% endif %}
    {% if product.shiny_app %}
    <p><a style="font-family:'Arial'" href="{{product.shiny_app}}">Shiny App</a></p>
    {% endif %}
  <div class="container">
  {% if product.umap_plot %}
  <img src = "{{ product.umap_plot.url }}" alt="umap plot">
  {% endif %}
  <div class="text">
  <h2 style="font-family:'Helvetica Neue'">{{"Datasets in this Data Product:"}}</h2> 
  <ul style="font-family:'Helvetica Neue'">  
    {% for dataset in product.datasets.all %}
    	<li>{{ dataset.hbmid }}</li>
    {% endfor %}
    </ul>
    </div>
    {% if product.processed_cell_type_counts %}
    <div class="dropdown">
      <button class="dropbtn">Processed Cell Types<span class="down-caret"></span></button>
      <div class="dropdown-content">
      {% for key, value in product.processed_cell_type_counts.items %}
        {{ key }}: {{value}}<br>
      {% endfor %}
    {% endif %}
      </div>
    </div>
    </div>
    <!--{% if product.download %}
    <a style="font-family:'Helvetica Neue'" href="{{product.download}}">Download Data Product</a>
    {% endif %}<p>
    {% if product.shiny_app %}
    <a style="font-family:'Helvetica Neue'" href="{{product.shiny_app}}">Shiny App</a>
    {% endif %}-->
{% endblock %}
