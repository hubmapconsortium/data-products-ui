{% extends "data_products/base.html" %}

{% block content %}
    <h1 style="font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue,sans-serif">{{ product.tissue.tissuetype }}</h1>
    <h2 style="font-family:'Arial'"; font-size:25px>{{ product.processed_total_cell_count }} Cells/Nuclei in Processed Product</h2>
    {% if product.download %}
    <p><a style="font-family:'Arial'" href="{{product.download}}/{{product.tissue.tissuecode}}_raw.h5ad">Download Raw Data Product</a>
    &nbsp;&nbsp;<a style="font-family:'Arial'" href="{{product.download}}/{{product.tissue.tissuecode}}_processed.h5ad">Download Processed Data Product</a></p>
    {% endif %}
    {% if product.shiny_app %}
    <p><a style="font-family:'Arial'" href="{{product.shiny_app}}">Shiny App</a></p>
    {% endif %}
  {% if product.umap_plot %}
  <img style="float: left; margin-left: 60px; margin-right: 100px; display: inline-block;" src  = "{{ product.umap_plot.url }}" alt="umap plot">
  {% endif %}
  <br>
  <button type="button" class="collapsible">{{"Datasets in this Data Product"}}<span class="down-caret"></span></button>
  <div class="content">
   <ul>{% for dataset in product.datasets.all %}
    	<li><a href="https://portal.hubmapconsortium.org/browse/dataset/{{ dataset.uuid }}", style="font-family:'Arial'">{{ dataset.hbmid }}</a></li><br>
    {% endfor %}</ul>
    </div>
    {% if product.processed_cell_type_counts %}
	<br><br><button type="button" class="collapsible">{{"Processed Cell Types"}}<span class="down-caret"></span></button>
	      <div class="content">
      <table>
      {% for key, value in product.processed_cell_type_counts.items %}
        <tr><td><a style="font-family:'Arial'">{{ key }}</a></td>
            <td><a style="font-family:'Arial'">{{value}}</a></td></tr>
      {% endfor %}
      </table>
    {% endif %}
    </div>
<!--<script>
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.display === "list-item") {
      content.style.display = "none";
    } else {
      content.style.display = "list-item";
    }
  });
}
</script>-->

{% endblock %}
